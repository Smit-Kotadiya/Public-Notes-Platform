<!DOCTYPE html>
<html>
<head>
  <title>Your Notes</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .note { border: 1px solid #ccc; padding: 10px; margin: 10px 0; }
    .note h3 { margin: 0; }
  </style>
</head>
<body>
  <h1>Your Notes</h1>
  <div id="notes-container"></div>

  <script>
    const userEmail = localStorage.getItem("userEmail");

    if (!userEmail) {
      alert("Not logged in!");
      window.location.href = "login.html";
    }
    else {
      fetch(`http://localhost:3000/api/users/author?email=${userEmail}`)
      .then(res => res.json())
      .then(userData => {
        const author = userData.author;
        
        return fetch(`http://localhost:3000/api/notes/author?author=${author}`);
      })
      .then(res => res.json())
      .then(notes => {
        const container = document.getElementById("notes-container");
        if (notes.length === 0) {
          container.innerHTML = "<p>No notes found.</p>";
        } else {
          notes.forEach(note => {
            const div = document.createElement("div");
            div.className = "note";
            div.innerHTML = `
              <h3>${note.title}</h3>
              <p>${note.content}</p>
              <p><strong>Tags:</strong> ${note.tags.join(', ')}</p>
            `;
            container.appendChild(div);
          });
        }
      })
      .catch(err => {
        console.error(err);
        alert("Error" + err.message);
      });
    }
  </script>
</body>
</html>
